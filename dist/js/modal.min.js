window.popup=function(t){var e,n,o,i,a,s,c,l,p=this;!function(){if(!t.content)return console.error("please add contents to the popup");if(e=document.createElement("div"),n=document.createElement("div"),i=document.createElement("div"),o=document.createElement("div"),s=document.createElement("div"),c=document.createElement("span"),c.innerHTML="&#10006;",s.innerHTML=t.content,e.classList.add("gpopup-container"),n.classList.add("gpopup-backdrop"),i.classList.add("gpopup"),o.classList.add("gpopup-wrapper"),s.classList.add("gpopup-content"),c.classList.add("close"),e.appendChild(i),e.appendChild(n),t.animation&&(p.animation=t.animation),t.className)if("string"==typeof t.className)e.classList.add(t.className);else for(var u=0;u<t.className.length;u++)e.classList.add(t.className[u]);if(t.title?((a=document.createElement("div")).classList.add("header"),a.innerHTML=t.title,a.appendChild(c),i.appendChild(a)):s.appendChild(c),i.appendChild(s),t.buttons&&"object"==typeof t.buttons){(l=document.createElement("div")).classList.add("backdrop-footer");for(var r=0;r<t.buttons.length;r++){var d=t.buttons[r],m=document.createElement("button");m.dataset.id=r,m.setAttribute("type","button"),m.classList.add("gpopup-btn"),d.className&&m.classList.add(d.className),d.focus&&m.classList.add("focus"),m.innerHTML=d.label?d.label:"Button "+r,m.addEventListener("click",function(e){t.buttons[e.target.dataset.id].callback(e,p)},!1),l.appendChild(m)}i.appendChild(l)}}(),c.addEventListener("click",function(){p.exit()},!1),p.root=e,t.exitOnBackdropClick&&n.addEventListener("click",function(){p.exit()},!1);var u;this.exit=function(){p.initAnimation(),setTimeout(function(){e.parentNode===document.body&&document.body.removeChild(e),document.querySelector(".gpopup-container")||(document.body.style.overflowY="auto"),t.closeCallback&&t.closeCallback(),document.body.classList.remove("modal-active"),u&&(document.body.scrollTop=u)},p.animations[p.animation].time)},this.show=function(){return"function"==typeof p.initAnimation&&p.initAnimation(),document.body.style.overflowY="hidden",document.body.appendChild(e),i.clientHeight>.4*window.innerHeight&&(i.style.top="10%"),i.clientHeight+i.offsetTop>=window.outerHeight&&(this.root.style.overflowY="scroll"),i.querySelector(".focus")&&i.querySelector(".focus").focus(),"function"==typeof p.animate&&p.animate(),u=document.body.scrollTop,document.body.classList.add("modal-active"),p},this.initAnimation=function(){"object"!=typeof p.animations[p.animation]&&(p.animation="fade"),p.animations[p.animation].init(this.root)},this.animate=function(){p.animations[p.animation].animate(this.root)},this.animations={fade:{init:function(t){t.style.opacity="0",t.style.transition="opacity 0.3s ease-in"},animate:function(t){t.style.opacity="1"},time:300},slideDown:{init:function(t){t.style.opacity="0",t.querySelector(".gpopup").style.marginTop="-100px",t.style.transition="opacity 0.3s ease-in",t.querySelector(".gpopup").style.transition="margin-top 0.3s ease-out"},animate:function(t){t.style.opacity="1",t.querySelector(".gpopup").style.marginTop="0"},time:300},slideUp:{init:function(t){t.style.opacity="0",t.querySelector(".gpopup").style.marginTop="100px",t.style.transition="opacity 0.3s ease-in",t.querySelector(".gpopup").style.transition="margin-top 0.3s ease-out"},animate:function(t){t.style.opacity="1",t.querySelector(".gpopup").style.marginTop="0"},time:300},slideLeft:{init:function(t){t.style.opacity="0",t.querySelector(".gpopup").style.marginLeft="100px",t.style.transition="opacity 0.3s ease-in",t.querySelector(".gpopup").style.transition="margin-left 0.3s ease-out"},animate:function(t){t.style.opacity="1",t.querySelector(".gpopup").style.marginLeft="0"},time:300},slideRight:{init:function(t){t.style.opacity="0",t.querySelector(".gpopup").style.marginLeft="-100px",t.style.transition="opacity 0.3s ease-in",t.querySelector(".gpopup").style.transition="margin-left 0.3s ease-out"},animate:function(t){t.style.opacity="1",t.querySelector(".gpopup").style.marginLeft="0"},time:300}}},window.initGModal=function(){window.alert=function(){var t,e,n,o,i="string"==typeof arguments[1];e=i?arguments[1]:arguments[0],t=i?arguments[0]:null,n=i?arguments[2]:arguments[1],o=i?arguments[3]:arguments[2];var a=new window.popup({content:e,title:t,buttons:[{label:"Ok",callback:function(t,e){e.exit()},focus:!0}],className:"noclose",closeCallback:n,animation:o});return a.show(),a},window.confirm=function(){var t,e,n,o,i="string"==typeof arguments[1];e=i?arguments[1]:arguments[0],t=i?arguments[0]:null,n=i?arguments[2]:arguments[1],o=i?arguments[3]:arguments[2];var a=new window.popup({content:e,title:t,buttons:[{label:"No",callback:function(t,e){e.exit(),n(!1)}},{label:"Yes",callback:function(t,e){e.exit(),n(!0)},focus:!0}],className:"noclose",animation:o});return a.show(),a},window.prompt=function(t,e,n,o){var i=new window.popup({title:t,content:"<input type='text' class='gpopup-prompt-input gpopup-input focus' placeholder='Please input' value='"+e+"' >",buttons:[{label:"Ok",callback:function(t,e){var o=e.root.querySelector(".gpopup-prompt-input").value;e.exit(),n(o)}}],className:"noclose",animation:o});return i.show(),i}};