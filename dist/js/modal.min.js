window.popup=function(t){var e,n,o,i,a,s,l,c,p=this;!function(){if(!t.content)return console.error("please add contents to the popup");if(e=document.createElement("div"),n=document.createElement("div"),i=document.createElement("div"),o=document.createElement("div"),s=document.createElement("div"),l=document.createElement("span"),l.innerHTML="&#10006;",s.innerHTML=t.content,e.classList.add("gpopup-container"),n.classList.add("gpopup-backdrop"),i.classList.add("gpopup"),o.classList.add("gpopup-wrapper"),s.classList.add("gpopup-content"),l.classList.add("close"),o.appendChild(i),e.appendChild(n),e.appendChild(o),t.animation&&(p.animation=t.animation),t.className)if("string"==typeof t.className)e.classList.add(t.className);else for(var r=0;r<t.className.length;r++)e.classList.add(t.className[r]);if(t.title?((a=document.createElement("div")).classList.add("header"),a.innerHTML=t.title,a.appendChild(l),i.appendChild(a)):s.appendChild(l),i.appendChild(s),t.buttons&&"object"==typeof t.buttons){(c=document.createElement("div")).classList.add("backdrop-footer");for(var u=0;u<t.buttons.length;u++){var d=t.buttons[u],m=document.createElement("button");m.dataset.id=u,m.setAttribute("type","button"),m.classList.add("gpopup-btn"),d.className&&m.classList.add(d.className),d.focus&&m.classList.add("focus"),m.innerHTML=d.label?d.label:"Button "+u,m.addEventListener("click",function(e){t.buttons[e.target.dataset.id].callback(e,p)},!1),c.appendChild(m)}i.appendChild(c)}}(),l.addEventListener("click",function(){p.exit()},!1),p.root=e,t.exitOnBackdropClick&&(n.addEventListener("click",function(){p.exit()},!1),n.querySelectorAll("*:not(.gpopup-wrapper)").forEach(function(t){t.addEventListener("click",function(t){t.stopPropagation()},!1)})),this.exit=function(){p.initAnimation(),setTimeout(function(){n.parentNode===document.body&&document.body.removeChild(n),document.querySelector(".gpopup-backdrop")||(document.body.style.overflowY="auto"),t.closeCallback&&t.closeCallback()},p.animations[p.animation].time)},this.show=function(){return"function"==typeof p.initAnimation&&p.initAnimation(),document.body.style.overflowY="hidden",document.body.appendChild(e),i.clientHeight>.4*window.innerHeight&&(o.style.top="10%"),n.querySelector(".focus")&&n.querySelector(".focus").focus(),"function"==typeof p.animate&&p.animate(),p},this.initAnimation=function(){"object"!=typeof p.animations[p.animation]&&(p.animation="fade"),p.animations[p.animation].init(this.root)},this.animate=function(){p.animations[p.animation].animate(this.root)},this.animations={fade:{init:function(t){t.style.opacity="0",t.style.transition="opacity 0.3s ease-in"},animate:function(t){t.style.opacity="1"},time:300},slideDown:{init:function(t){t.style.opacity="0",t.querySelector(".gpopup").style.transform="translate(0,-100px)",t.style.transition="opacity 0.3s ease-in",t.querySelector(".gpopup").style.transition="transform 0.3s ease-out"},animate:function(t){t.style.opacity="1",t.querySelector(".gpopup").style.transform="translate(0,0)"},time:300},slideUp:{init:function(t){t.style.opacity="0",t.querySelector(".gpopup").style.transform="translate(0,100px)",t.style.transition="opacity 0.3s ease-in",t.querySelector(".gpopup").style.transition="transform 0.3s ease-out"},animate:function(t){t.style.opacity="1",t.querySelector(".gpopup").style.transform="translate(0,0)"},time:300},slideLeft:{init:function(t){t.style.opacity="0",t.querySelector(".gpopup").style.transform="translate(100px,0)",t.style.transition="opacity 0.3s ease-in",t.querySelector(".gpopup").style.transition="transform 0.3s ease-out"},animate:function(t){t.style.opacity="1",t.querySelector(".gpopup").style.transform="translate(0,0)"},time:300},slideRight:{init:function(t){t.style.opacity="0",t.querySelector(".gpopup").style.transform="translate(-100px)",t.style.transition="opacity 0.3s ease-in",t.querySelector(".gpopup").style.transition="transform 0.3s ease-out"},animate:function(t){t.style.opacity="1",t.querySelector(".gpopup").style.transform="translate(0,0)"},time:300}}},window.initGModal=function(){window.alert=function(){var t,e,n,o,i="string"==typeof arguments[1];e=i?arguments[1]:arguments[0],t=i?arguments[0]:null,n=i?arguments[2]:arguments[1],o=i?arguments[3]:arguments[2];var a=new window.popup({content:e,title:t,buttons:[{label:"Ok",callback:function(t,e){e.exit()},focus:!0}],className:"noclose",closeCallback:n,animation:o});return a.show(),a},window.confirm=function(){var t,e,n,o,i="string"==typeof arguments[1];e=i?arguments[1]:arguments[0],t=i?arguments[0]:null,n=i?arguments[2]:arguments[1],o=i?arguments[3]:arguments[2];var a=new window.popup({content:e,title:t,buttons:[{label:"No",callback:function(t,e){e.exit(),n(!1)}},{label:"Yes",callback:function(t,e){e.exit(),n(!0)},focus:!0}],className:"noclose",animation:o});return a.show(),a},window.prompt=function(t,e,n,o){var i=new window.popup({title:t,content:"<input type='text' class='gpopup-prompt-input gpopup-input focus' placeholder='Please input' value='"+e+"' >",buttons:[{label:"Ok",callback:function(t,e){var o=e.root.querySelector(".gpopup-prompt-input").value;e.exit(),n(o)}}],className:"noclose",animation:o});return i.show(),i}};